# User Stories и Use Cases для системы вакансий

## Для роли **Соискатель**

### US-1: Регистрация соискателя
**Как** соискатель  
**Я хочу** зарегистрироваться в системе  
**Чтобы** иметь доступ к функционалу поиска вакансий и откликов

**Критерии приемки:**
- Система запрашивает email, имя и пароль
- Пароль хранится в хешированном виде (`UserInfo.hashed_password`)
- После регистрации создается запись `Applicant` с `is_company=False`
- Пользователь получает подтверждение о регистрации

**Тест-кейсы:**
1. Успешная регистрация с корректными данными
2. Попытка регистрации с уже существующим email → ошибка
3. Попытка регистрации с некорректным паролем → ошибка

---

### US-2: Просмотр списка активных вакансий
**Как** соискатель  
**Я хочу** видеть список доступных вакансий  
**Чтобы** выбрать подходящие для отклика

**Критерии приемки:**
- Отображаются только вакансии с `is_active=True`
- Можно фильтровать по зарплате (`salary_from`, `salary_to`)
- Можно сортировать по дате создания (`created_at`)

**Тест-кейсы:**
1. Отображение только активных вакансий
2. Фильтрация по зарплате → только вакансии в указанном диапазоне
3. Сортировка по дате → сначала новые

---

### US-3: Отклик на вакансию
**Как** соискатель  
**Я хочу** отправить отклик на вакансию  
**Чтобы** выразить интерес к позиции

**Критерии приемки:**
- Можно добавить сопроводительное сообщение (`Response.message`)
- Нельзя отправить более 5 откликов на одну вакансию
- Отклик сохраняется в `Applicant.responses` и `Job.responses`

**Тест-кейсы:**
1. Успешный отклик → запись в `responses`
2. Попытка отправить 6-й отклик → ошибка `ValueError`
3. Отправка пустого сообщения → ошибка

---

### US-4: Удаление отклика
**Как** соискатель  
**Я хочу** удалить свой отклик  
**Чтобы** отозвать заявку

**Критерии приемки:**
- Отклик удаляется из `Applicant.responses` и `Job.responses`
- После удаления нельзя восстановить отклик

**Тест-кейсы:**
1. Удаление существующего отклика → успех
2. Попытка удалить несуществующий отклик → ошибка

---

## Для роли **Компания**

### US-5: Регистрация компании
**Как** представитель компании  
**Я хочу** зарегистрироваться в системе  
**Чтобы** публиковать вакансии и управлять ими

**Критерии приемки:**
- Обязательные поля: email, название компании, пароль
- При создании устанавливается `is_company=True`
- После регистрации можно добавлять вакансии

**Тест-кейсы:**
1. Успешная регистрация → создание `Company`
2. Попытка зарегистрироваться с email соискателя → ошибка

---

### US-6: Создание вакансии
**Как** компания  
**Я хочу** добавить новую вакансию  
**Чтобы** привлекать соискателей

**Критерии приемки:**
- Обязательные поля: описание (`description`), зарплата (`salary_from`, `salary_to`)
- Автоматическая валидация: `salary_from <= salary_to`
- По умолчанию `is_active=True`

**Тест-кейсы:**
1. Успешное создание → запись в `Company.jobs`
2. Попытка указать `salary_from > salary_to` → ошибка `ValueError`

---

### US-7: Обновление вакансии
**Как** компания  
**Я хочу** редактировать вакансию  
**Чтобы** актуализировать информацию

**Критерии приемки:**
- Можно изменить: описание, зарплату, активность
- Сохраняется валидация зарплаты через `_validate_salary`

**Тест-кейсы:**
1. Успешное обновление → изменения в `Job`
2. Обновление с невалидной зарплатой → ошибка

---

### US-8: Архивация вакансии
**Как** компания  
**Я хочу** архивировать вакансию  
**Чтобы** скрыть её из поиска

**Критерии приемки:**
- Устанавливается `is_active=False`
- Вакансия остается в системе но не отображается в поиске

**Тест-кейсы:**
1. Архивация → `is_active=False`
2. Повторная активация → `is_active=True`

---

## Дополнительные Use Cases

### UC-1: Просмотр откликов на вакансию (для компании)
1. Компания запрашивает `Job.responses`
2. Система возвращает:
   - Список сообщений (`Response.message`)
   - Данные соискателей (`Applicant.user_info`)

### UC-2: Поиск вакансий по ключевым словам
1. Соискатель вводит ключевое слово
2. Система ищет совпадения в:
   - `Job.description`
   - Названии компании (`Company.user_info.name`)

### UC-3: Уведомление о новом отклике
1. При вызове `Job.add_response()`
2. Система отправляет уведомление:
   - В личный кабинет компании
   - На email из `Company.user_info.email`

### UC-4: Валидация пароля
1. Требования:
   - Минимум 8 символов
   - Обязательная хешизация (`UserInfo.hashed_password`)
2. Проверки:
   - При регистрации
   - При смене пароля